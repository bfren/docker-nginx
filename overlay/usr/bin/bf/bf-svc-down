#!/bin/sh

set -euo pipefail


#======================================================================================================================
# Check arguments.
#   1   Service name
#======================================================================================================================

[[ -z "${1-}" ]] && bf-error "You must provide the name of the service to stop." "bf-svc-down"
SVC=${1}


#======================================================================================================================
# Use S6 to stop a service, showing custom error message if it fails.
#======================================================================================================================

bf-debug "Stopping ${SVC}." "bf-svc-down"
s6-rc -v 3 -d change "${SVC}" \
    && bf-echo "Service ${SVC} has been stopped." "bf-svc-down" \
    || bf-error "s6-rc exited $? while disabling service ${SVC}." "bf-svc-down"
